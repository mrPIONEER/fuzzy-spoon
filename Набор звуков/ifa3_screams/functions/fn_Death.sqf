/*
	IFA3 Liberation
	Крики смерти + крик стреляющего

	Код: PIONEER
*/

// Проверка настроек CBA
if (!ifa3_screams_cba_death) exitwith {};

// на сервере только запускается
if (!isServer) exitwith {};

_unit = _this select 0;
_killer = _this select 1;

// Проверка на технику
if (vehicle _unit!= _unit) exitWith {};

_podmena = "Land_HelipadEmpty_F" createVehicle [0,0,0];
_podmena attachto [_unit, [0,0,0]];

_randomkrik = [
"ger_d1_death_close1",
"ger_d1_death_close2",
"ger_d1_death_close3",
"ger_d1_death_close4",
"ger_d1_death_close5",
"ger_d1_death_close6",
"ger_d1_death_close7",
"ger_d1_death_close8",
"ger_d1_death_close9",
"ger_d1_death_close10",
"ger_d1_death_close11",
"ger_d1_death_close12",
"ger_d1_death_close13",
"ger_d1_death_close14",
"ger_d1_death_close15",
"ger_d1_death_close16",
"ger_d1_death_close17",
"ger_d1_death_close18",
"ger_d1_death_close19",
"ger_d1_death_close20",
"ger_d1_death_close21",
"ger_d1_death_close22",
"ger_d1_death_close23",
"ger_d2_death_close1a",
"ger_d2_death_close2a",
"ger_d2_death_close3a",
"ger_d2_death_close4a",
"ger_d2_death_close5a",
"ger_d2_death_close6a",
"ger_d2_death_close7a",
"ger_d2_death_close8a",
"ger_d2_death_close9a",
"ger_d2_death_close10a",
"ger_d2_death_close11a",
"ger_d2_death_close12a",
"ger_d2_death_close13a",
"ger_d2_death_close14a",
"ger_d2_death_close15a",
"ger_d2_death_close16a",
"ger_d2_death_close17a",
"ger_d2_death_close18a",
"ger_d2_death_close19a",
"ger_d2_death_close20a",
"ger_d2_death_close21a",
"usa1_d1_death_close2",
"usa1_d1_death_close3",
"usa1_d1_death_close4",
"usa1_d1_death_close5",
"usa1_d1_death_close7",
"usa1_d1_death_close8",
"usa1_d1_death_close9",
"usa1_d1_death_close10",
"usa1_d1_death_close11",
"usa1_d1_death_close12",
"usa1_d1_death_close13",
"usa1_d1_death_close14",
"usa1_d1_death_close15",
"usa1_d1_death_close16",
"usa1_d1_death_close17",
"usa1_d1_death_close18",
"usa1_d1_death_close19",
"usa1_d1_death_close20",
"usa1_d1_death_close21",
"usa1_d1_death_close22",
"usa1_d1_death_close23",
"usa1_d2_death_close1",
"usa1_d2_death_close2",
"usa1_d2_death_close3",
"usa1_d2_death_close4",
"usa1_d2_death_close5",
"usa1_d2_death_close6",
"usa1_d2_death_close7",
"usa1_d2_death_close8",
"usa1_d2_death_close9",
"usa1_d2_death_close10",
"usa1_d2_death_close11",
"usa1_d2_death_close12",
"usa1_d2_death_close13",
"usa1_d2_death_close14",
"usa1_d2_death_close15",
"usa1_d3_death_close1",
"usa1_d3_death_close2",
"usa1_d3_death_close3",
"usa1_d3_death_close4",
"usa1_d3_death_close5",
"usa1_d3_death_close6",
"usa1_d3_death_close7",
"usa1_d3_death_close8",
"usa1_d3_death_close9",
"usa1_d3_death_close10",
"usa1_d3_death_close11",
"usa1_d3_death_close12",
"usa1_d3_death_close13",
"usa1_d3_death_close14",
"usa1_d3_death_close15",
"usa1_d3_death_close16",
"usa1_d4_death_close1",
"usa1_d4_death_close2",
"usa1_d4_death_close3",
"usa1_d4_death_close4",
"usa1_d4_death_close5",
"usa1_d4_death_close6",
"usa1_d4_death_close7",
"usa1_d4_death_close8",
"usa1_d4_death_close9",
"usa1_d4_death_close10",
"usa1_d4_death_close11",
"usa1_d4_death_close12",
"usa1_d4_death_close13",
"usa1_d4_death_close14",
"usa1_d4_death_close15",
"usa1_d5_death_close1",
"usa1_d5_death_close2",
"usa1_d5_death_close3",
"usa1_d5_death_close4",
"usa1_d5_death_close5",
"usa1_d5_death_close6",
"usa1_d5_death_close7",
"usa1_d5_death_close8",
"usa1_d5_death_close9",
"usa1_d5_death_close10",
"usa1_d5_death_close11",
"usa1_d5_death_close12",
"usa1_d5_death_close13",
"usa1_d5_death_close14",
"usa1_d5_death_close15",
"usa1_d6_death_close1",
"usa1_d6_death_close2",
"usa1_d6_death_close3",
"usa1_d6_death_close4",
"usa1_d6_death_close5",
"usa1_d6_death_close6",
"usa1_d6_death_close7",
"usa1_d6_death_close8",
"usa1_d6_death_close9",
"usa1_d6_death_close10",
"usa1_d6_death_close11",
"usa1_d6_death_close12",
"usa1_d6_death_close13",
"usa1_d6_death_close14",
"usa1_d6_death_close15",
"usa1_d6_death_close16",
"usa1_d7_death_close1",
"usa1_d7_death_close2",
"usa1_d7_death_close3",
"usa1_d7_death_close4",
"usa1_d7_death_close5",
"usa1_d7_death_close6",
"usa1_d7_death_close7",
"usa1_d7_death_close8",
"usa1_d7_death_close9",
"usa1_d7_death_close10",
"usa1_d7_death_close11",
"usa1_d7_death_close12",
"usa1_d7_death_close13",
"usa1_d7_death_close14",
"usa1_d7_death_close15"
] call BIS_fnc_selectRandom;

[_podmena, _randomkrik, 100] call CBA_fnc_globalSay3d;

// Выкрик стреляющего
if (_killer distance _unit < 100) then {

	// СССР
	if ((_killer isKindOf "LIB_SOV_Soldier_base") and alive _killer) then {
	
		private ["_random"];

		// Проверка на технику
		if (vehicle _killer!= _killer) exitWith {};
		
		// Выход рандомно
		_random = floor(random 10);
		if (_random > 6) exitWith {};
		
		_randomkrik_killer = [
		"RUS_alf1_fired_293",
		"RUS_alf1_fired_296",
		"RUS_alf1_fired_324",
		"RUS_alf1_fired_325",
		"RUS_alf1_fired_327",
		"RUS_alf1_fired_375",
		"RUS_alf1_fired_376",
		"RUS_alf1_fired_377",
		"RUS_alf1_fired_378",
		"RUS_alf1_fired_386",
		"RUS_alf1_fired_397",
		"RUS_alf1_fired_398",
		"RUS_alf1_fired_399",
		"RUS_alf1_fired_400",
		"RUS_alf1_fired_402",
		"RUS_alf1_fired_404",
		"RUS_alf1_fired_405",
		"RUS_alf1_fired_407",
		"RUS_alf2_fired_293",
		"RUS_alf2_fired_296",
		"RUS_alf2_fired_324",
		"RUS_alf2_fired_325",
		"RUS_alf2_fired_327",
		"RUS_alf2_fired_375",
		"RUS_alf2_fired_376",
		"RUS_alf2_fired_377",
		"RUS_alf2_fired_378",
		"RUS_alf2_fired_386",
		"RUS_alf2_fired_397",
		"RUS_alf2_fired_398",
		"RUS_alf2_fired_399",
		"RUS_alf2_fired_400",
		"RUS_alf2_fired_402",
		"RUS_alf2_fired_404",
		"RUS_alf2_fired_405",
		"RUS_alf2_fired_407",
		"RUS_alf3_fired_293",
		"RUS_alf3_fired_296",
		"RUS_alf3_fired_324",
		"RUS_alf3_fired_325",
		"RUS_alf3_fired_327",
		"RUS_alf3_fired_375",
		"RUS_alf3_fired_376",
		"RUS_alf3_fired_377",
		"RUS_alf3_fired_378",
		"RUS_alf3_fired_386",
		"RUS_alf3_fired_397",
		"RUS_alf3_fired_398",
		"RUS_alf3_fired_399",
		"RUS_alf3_fired_400",
		"RUS_alf3_fired_402",
		"RUS_alf3_fired_404",
		"RUS_alf3_fired_405",
		"RUS_alf3_fired_407",
		"RUS_alf4_fired_293",
		"RUS_alf4_fired_296",
		"RUS_alf4_fired_324",
		"RUS_alf4_fired_325",
		"RUS_alf4_fired_327",
		"RUS_alf4_fired_375",
		"RUS_alf4_fired_376",
		"RUS_alf4_fired_377",
		"RUS_alf4_fired_378",
		"RUS_alf4_fired_386",
		"RUS_alf4_fired_397",
		"RUS_alf4_fired_398",
		"RUS_alf4_fired_399",
		"RUS_alf4_fired_400",
		"RUS_alf4_fired_402",
		"RUS_alf4_fired_404",
		"RUS_alf4_fired_405",
		"RUS_alf4_fired_407",
		"RUS_alf5_fired_293",
		"RUS_alf5_fired_296",
		"RUS_alf5_fired_324",
		"RUS_alf5_fired_325",
		"RUS_alf5_fired_327",
		"RUS_alf5_fired_375",
		"RUS_alf5_fired_376",
		"RUS_alf5_fired_377",
		"RUS_alf5_fired_378",
		"RUS_alf5_fired_386",
		"RUS_alf5_fired_397",
		"RUS_alf5_fired_398",
		"RUS_alf5_fired_399",
		"RUS_alf5_fired_400",
		"RUS_alf5_fired_402",
		"RUS_alf5_fired_404",
		"RUS_alf5_fired_405",
		"RUS_alf5_fired_407",
		"RUS_alf6_fired_293",
		"RUS_alf6_fired_296",
		"RUS_alf6_fired_324",
		"RUS_alf6_fired_325",
		"RUS_alf6_fired_327",
		"RUS_alf6_fired_375",
		"RUS_alf6_fired_376",
		"RUS_alf6_fired_377",
		"RUS_alf6_fired_378",
		"RUS_alf6_fired_386",
		"RUS_alf6_fired_397",
		"RUS_alf6_fired_398",
		"RUS_alf6_fired_399",
		"RUS_alf6_fired_400",
		"RUS_alf6_fired_402",
		"RUS_alf6_fired_404",
		"RUS_alf6_fired_405",
		"RUS_alf6_fired_407",
		"RUS_alf7_fired_293",
		"RUS_alf7_fired_296",
		"RUS_alf7_fired_324",
		"RUS_alf7_fired_325",
		"RUS_alf7_fired_327",
		"RUS_alf7_fired_375",
		"RUS_alf7_fired_376",
		"RUS_alf7_fired_377",
		"RUS_alf7_fired_378",
		"RUS_alf7_fired_386",
		"RUS_alf7_fired_397",
		"RUS_alf7_fired_398",
		"RUS_alf7_fired_399",
		"RUS_alf7_fired_400",
		"RUS_alf7_fired_402",
		"RUS_alf7_fired_404",
		"RUS_alf7_fired_405",
		"RUS_alf7_fired_407",
		"RUS_alf8_fired_293",
		"RUS_alf8_fired_296",
		"RUS_alf8_fired_324",
		"RUS_alf8_fired_325",
		"RUS_alf8_fired_327",
		"RUS_alf8_fired_375",
		"RUS_alf8_fired_376",
		"RUS_alf8_fired_377",
		"RUS_alf8_fired_378",
		"RUS_alf8_fired_386",
		"RUS_alf8_fired_397",
		"RUS_alf8_fired_398",
		"RUS_alf8_fired_399",
		"RUS_alf8_fired_400",
		"RUS_alf8_fired_402",
		"RUS_alf8_fired_404",
		"RUS_alf8_fired_405",
		"RUS_alf8_fired_407",
		"RUS_alf9_fired_293",
		"RUS_alf9_fired_296",
		"RUS_alf9_fired_324",
		"RUS_alf9_fired_325",
		"RUS_alf9_fired_327",
		"RUS_alf9_fired_375",
		"RUS_alf9_fired_376",
		"RUS_alf9_fired_377",
		"RUS_alf9_fired_378",
		"RUS_alf9_fired_386",
		"RUS_alf9_fired_397",
		"RUS_alf9_fired_398",
		"RUS_alf9_fired_399",
		"RUS_alf9_fired_400",
		"RUS_alf9_fired_402",
		"RUS_alf9_fired_404",
		"RUS_alf9_fired_405",
		"RUS_alf9_fired_407"
		] call BIS_fnc_selectRandom;
	
		[_killer, _randomkrik_killer, 100] call CBA_fnc_globalSay3d;
	};
};
 
[{
params ["_podmena"];
deleteVehicle _podmena;
}, [_podmena],5] call CBA_fnc_waitAndExecute;

if (true) exitWith {};